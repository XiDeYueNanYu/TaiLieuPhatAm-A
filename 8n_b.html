<!doctype html>
<html lang="en">
<head>
<link rel="stylesheet" type="text/css" href="base.css" />
<link rel="stylesheet" type="text/css" href="content.css" />
<link rel="stylesheet" type="text/css" href="nav.css" />
<meta http-equiv="content-type" content="text/html;  charset=utf-8" />
<title>8.（易读辅音）声母+基础单元音韵腹+韵尾-n （B） | 阮玉煌 —— 越南语 - 练习发音资料 [Weixin: XiDeYueNanYu] </title>
<link rel="shortcut icon" href="favicon.ico" type="image/x-icon" />
<meta name="author" content="阮玉煌" />
<meta name="generator" content="eXeLearning 2.9 - exelearning.net" />
<!--[if lt IE 9]><script type="text/javascript" src="exe_html5.js"></script><![endif]-->
<script type="text/javascript" src="exe_jquery.js"></script>
<script type="text/javascript" src="common_i18n.js"></script>
<script type="text/javascript" src="common.js"></script>
<meta name="viewport" content="width=device-width, initial-scale=1" />
    </head>
<body class="exe-web-site" id="exe-node-6"><script type="text/javascript">document.body.className+=" js"</script>
<div id="content">
<p id="skipNav"><a href="#main" class="sr-av">Skip navigation</a></p>
<header id="header" ><div id="headerContent">阮玉煌 —— 越南语 - 练习发音资料 [Weixin: XiDeYueNanYu]</div></header>
<nav id="siteNav">
<ul>
   <li><a href="index.html" class="daddy main-node">Home</a></li>
   <li><a href="1_.html" class="no-ch">1. 越南语发音概况</a></li>
   <li><a href="2_.html" class="no-ch">2. 声调介绍</a></li>
   <li><a href="3_9.html" class="no-ch">3. 越南语9个基础单元音</a></li>
   <li><a href="4a.html" class="no-ch">4.（易读辅音）声母+基础单元音韵母(韵腹)（A）</a></li>
   <li><a href="5b.html" class="no-ch">5.（易读辅音）声母+基础单元音韵母(韵腹)（B）</a></li>
   <li><a href="6_c.html" class="no-ch">6. 有关韵母声调练习（C）</a></li>
   <li><a href="7n_a.html" class="no-ch">7.（易读辅音）声母+基础单元音韵腹+韵尾-n （A）</a></li>
   <li id="active"><a href="8n_b.html" class="active no-ch">8.（易读辅音）声母+基础单元音韵腹+韵尾-n （B）</a></li>
   <li><a href="9_c.html" class="no-ch">9. 有关韵母声调练习（C）</a></li>
   <li><a href="10ng_a.html" class="no-ch">10.（易读辅音）声母+基础单元音韵腹+韵尾-ng （A）</a></li>
   <li><a href="11ng_b.html" class="no-ch">11.（易读辅音）声母+基础单元音韵腹+韵尾-ng （B）</a></li>
   <li><a href="12_c.html" class="no-ch">12. 有关韵母声调练习（C）</a></li>
   <li><a href="13m_a.html" class="no-ch">13.（易读辅音）声母+基础单元音韵腹+韵尾-m （A）</a></li>
   <li><a href="14m_b.html" class="no-ch">14.（易读辅音）声母+基础单元音韵腹+韵尾-m （B）</a></li>
   <li><a href="15_c.html" class="no-ch">15. 有关韵母声调练习（C）</a></li>
</ul>
</nav>
<div id='topPagination'>
<nav class="pagination noprt">
<a href="7n_a.html" class="prev"><span><span>&laquo; </span>Previous</span></a> <span class="sep">| </span><a href="9_c.html" class="next"><span>Next<span> &raquo;</span></span></a>
</nav>
</div>
<div id="main-wrapper">
<section id="main">
<header id="nodeDecoration"><h1 id="nodeTitle">8.（易读辅音）声母+基础单元音韵腹+韵尾-n （B）</h1></header>
<article class="iDevice_wrapper textIdevice" id="id9">
<div class="iDevice emphasis0" >
<div id="ta9_129_2" class="block iDevice_content">
<div class="exe-text"><style>
        .matrix-container {
            display: inline-block;
            margin-top: 20px;
        }
        .row {
            display: flex; /* Sử dụng Flexbox để sắp xếp nút trong hàng */
            justify-content: flex-start;
        }
        .button {
            width: 100px;
            height: 40px;
            margin: 2px;
            border: 2px solid #C0C0C0;
            border-radius: 5px;
            box-shadow: 2px 2px 4px #C0C0C0;
            cursor: pointer;
            font-size: 21px;
            font-weight: bold;
            font-family: Arial, sans-serif;
            text-align: center;
        }
        .header-button {
            background-color: #B7D7AA;
            color: #274E13;
        }
        .normal-button {
            background-color: #D9EAD3;
            color: #0C343D;
        }
        .playing {
            border: 2px solid #FF6820; /* Viền cam khi audio đang phát */
        }
        .record-button {
            background-color: #FF6820;
            color: #FFFFFF;
            width: 100px;
            height: 40px;
            font-size: 16px;
            margin: 2px;
        }
        .recording {
            background-color: #009300;
            color: #FFFFFF;
            width: 100px;
            height: 40px;
            font-size: 16px;
            margin: 2px;
        }
        .playback-button {
            background-color: #7D9EC0;
            color: #184008;
            width: 100px;
            height: 40px;
            font-size: 16px;
            margin: 2px;
        }
        .save-button {
            background-color: #CFE2F3;
            color: #184008;
            width: 100px;
            height: 40px;
            font-size: 16px;
            margin: 2px;
        }
        .controls {
            margin-top: 10px;
        }
    </style>
<p><span style="background-color: #ffff00;"><strong>注意：这里的练习仍然针对由基础单元音与韵尾 -n 构成的韵母。表格中列</strong></span><br /><span style="background-color: #ffff00;"><strong>出了左侧声母与需要练习的韵母搭配的常见词汇（空格子仅表示相对来说</strong></span><br /><span style="background-color: #ffff00;"><strong>不常见搭配，不一定不存在），并以不限声调的形式进行练习。</strong></span><br /><audio src="DNA-n.1.mp3" id="audioPlayer"><a href="DNA-n.1.mp3">audio/mpeg</a></audio><br /><br /><audio style="display: none;" id="playbackAudio"></audio></p>
<div id="matrix" class="matrix-container"></div>
<div class="controls"><button id="recordButton" class="button record-button">录音</button> <button id="playbackButton" class="button playback-button">试听</button> <button id="saveButton" class="button save-button">保存</button></div>
<p>
<script>
        const labels = [
            ["", "in", "ên", "en", "ơn", "an", "un", "ôn", "on"],
            ["b", "", "bên", "bèn", "", "bán", "bùn", "bốn", "bọn"],
            ["m", "mịn", "mến", "men", "mởn", "màn", "mụn", "môn", "mòn"],
            ["n", "nín", "nên", "nén", "", "nạn", "", "nôn", "nón"],
            ["th", "thìn", "", "thẹn", "", "than", "thun", "thôn", ""],
            ["t", "tin", "tên", "", "tợn", "tan", "", "tổn", ""],
            ["x", "xin", "", "xén", "", "", "", "xộn", ""],
            ["s", "", "sên", "sen", "sơn", "sàn", "sụn", "", "son"],
            ["l", "", "lên", "lén", "lớn", "lan", "lún", "lộn", "lọn"],
            ["d(gi, r)", "", "", "", "", "dán", "", "dồn", "dọn"],
            ["gi", "gìn", "", "", "giỡn", "giản", "giun", "", "giòn"],
            ["r", "", "rên", "rèn", "rợn", "rán", "run", "rốn", ""],
            ["c, k", "kín", "kền", "kèn", "cơn", "cạn", "cùn", "cồn", "con"],
            ["kh", "", "", "khen", "", "khán", "", "khôn", ""],
            ["h", "", "hên", "hẹn", "hơn", "hán", "hun", "hôn", "hòn"]
        ];

        // Khai báo audioSegments dưới dạng mảng 2D (15 hàng x 9 cột)
/*
 const audioSegments = [
            [[0, 0], [0, 0], [0, 0], [0, 0], [0, 0], [0, 0], [0, 0], [0, 0], [0, 0]],
            [[0, 0], [0, 0], [0, 0], [0, 0], [0, 0], [0, 0], [0, 0], [0, 0], [0, 0]],
            [[0, 0], [0, 0], [0, 0], [0, 0], [0, 0], [0, 0], [0, 0], [0, 0], [0, 0]],
            [[0, 0], [0, 0], [0, 0], [0, 0], [0, 0], [0, 0], [0, 0], [0, 0], [0, 0]],
            [[0, 0], [0, 0], [0, 0], [0, 0], [0, 0], [0, 0], [0, 0], [0, 0], [0, 0]],
            [[0, 0], [0, 0], [0, 0], [0, 0], [0, 0], [0, 0], [0, 0], [0, 0], [0, 0]],
            [[0, 0], [0, 0], [0, 0], [0, 0], [0, 0], [0, 0], [0, 0], [0, 0], [0, 0]],
            [[0, 0], [0, 0], [0, 0], [0, 0], [0, 0], [0, 0], [0, 0], [0, 0], [0, 0]],
            [[0, 0], [0, 0], [0, 0], [0, 0], [0, 0], [0, 0], [0, 0], [0, 0], [0, 0]],
            [[0, 0], [0, 0], [0, 0], [0, 0], [0, 0], [0, 0], [0, 0], [0, 0], [0, 0]],
            [[0, 0], [0, 0], [0, 0], [0, 0], [0, 0], [0, 0], [0, 0], [0, 0], [0, 0]],
            [[0, 0], [0, 0], [0, 0], [0, 0], [0, 0], [0, 0], [0, 0], [0, 0], [0, 0]],
            [[0, 0], [0, 0], [0, 0], [0, 0], [0, 0], [0, 0], [0, 0], [0, 0], [0, 0]],
            [[0, 0], [0, 0], [0, 0], [0, 0], [0, 0], [0, 0], [0, 0], [0, 0], [0, 0]],
            [[0, 0], [0, 0], [0, 0], [0, 0], [0, 0], [0, 0], [0, 0], [0, 0], [0, 0]]
        ];
*/

const audioSegments = [
    [[0, 0], [0.801088, 2.089796], [2.171066, 3.552653], [3.819683, 5.30576], [5.468299, 7.047256], [7.198186, 8.556553], [8.765533, 10.19356], [10.34449, 11.877007], [11.946667, 13.363084]],
    [[0, 0], [0, 0], [13.676553, 15.023311], [15.081361, 16.300408], [0, 0], [16.486168, 17.844535], [17.890975, 19.295782], [19.504762, 20.874739], [21.176599, 22.442086]],
    [[0, 0], [23.231565, 24.508662], [24.624762, 26.041179], [26.180499, 27.504036], [27.701406, 29.013333], [29.187483, 30.406531], [30.56907, 31.880998], [32.148027, 33.448345], [33.645714, 34.969252]],
    [[0, 0], [35.70068, 37.128707], [37.175147, 38.510295], [38.707664, 40.007982], [0, 0], [40.182132, 41.668209], [0, 0], [41.795918, 43.258776], [43.444535, 44.686803]],
    [[0, 0], [44.872562, 46.03356], [0, 0], [46.24254, 47.542857], [0, 0], [47.751837, 48.959274], [49.307574, 50.631111], [50.758821, 52.001088], [0, 0]],
    [[0, 0], [52.825397, 54.137324], [54.230204, 55.437642], [0, 0], [55.716281, 56.865669], [57.132698, 58.421406], [0, 0], [58.537506, 59.861043], [0, 0]],
    [[0, 0], [60.139683, 61.39356], [0, 0], [61.48644, 62.705488], [0, 0], [0, 0], [0, 0], [62.868027, 64.249615], [0, 0]],
    [[0, 0], [0, 0], [64.574694, 65.758912], [65.863401, 67.117279], [67.268209, 68.429206], [68.533696, 69.775964], [69.903673, 70.995011], [0, 0], [71.169161, 72.540227]],
    [[0, 0], [0, 0], [72.864218, 74.083265], [74.234195, 75.360363], [75.430023, 76.60263], [76.73034, 77.937778], [78.158367, 79.342585], [79.400635, 80.631293], [80.805442, 81.985057]],
    [[0, 0], [0, 0], [0, 0], [0, 0], [0, 0], [82.674649, 83.765986], [0, 0], [84.009796, 85.124354], [85.333333, 86.517551]],
    [[0, 0], [86.87746, 88.224218], [0, 0], [0, 0], [88.340317, 89.536145], [89.617415, 90.778413], [90.987392, 92.14839], [0, 0], [92.28771, 93.553197]],
    [[0, 0], [0, 0], [94.481995, 95.735873], [95.956463, 97.12907], [97.37288, 98.522268], [98.731247, 100.182494], [100.298594, 101.598912], [101.761451, 103.177868], [0, 0]],
    [[0, 0], [103.653878, 104.838095], [104.942585, 106.219683], [106.335782, 107.60127], [107.70576, 108.901587], [109.029297, 110.143855], [110.329615, 111.537052], [111.664762, 112.86059], [113.034739, 114.393107]],
    [[0, 0], [0, 0], [0, 0], [114.683356, 116.064943], [0, 0], [116.192653, 117.434921], [0, 0], [117.50458, 118.677188], [0, 0]],
    [[0, 0], [0, 0], [119.536327, 120.674104], [120.790204, 121.893152], [122.009252, 123.170249], [123.251519, 124.458957], [124.563447, 125.921814], [126.014694, 127.164082], [127.233741, 128.452789]]
];

        const audio = document.getElementById("audioPlayer");
        const playbackAudio = document.getElementById("playbackAudio");
        const matrix = document.getElementById("matrix");
        const recordButton = document.getElementById("recordButton");
        const playbackButton = document.getElementById("playbackButton");
        const saveButton = document.getElementById("saveButton");
        let mediaRecorder;
        let recordedChunks = [];
        let isRecording = false;
        let buttons = [];

        // Tạo ma trận nút
        for (let i = 0; i < labels.length; i++) {
            const row = document.createElement("div");
            row.className = "row"; // Thêm class cho hàng
            buttons[i] = [];
            for (let j = 0; j < 9; j++) {
                if (i === 0 && j === 0) {
                    const emptyCell = document.createElement("span");
                    emptyCell.style.display = "inline-block";
                    emptyCell.style.width = "100px";
                    emptyCell.style.height = "40px";
                    emptyCell.style.margin = "2px";
                    row.appendChild(emptyCell);
                    continue;
                }
                const button = document.createElement("button");
                button.className = "button" + (i === 0 || j === 0 ? " header-button" : " normal-button");
                button.textContent = labels[i][j];
                button.dataset.row = i; // Lưu chỉ số hàng
                button.dataset.col = j; // Lưu chỉ số cột
                button.onclick = () => playAudioSegment(i, j, button);
                buttons[i][j] = button;
                row.appendChild(button);
            }
            matrix.appendChild(row);
        }

        // Hàm phát đoạn audio gốc
        function playAudioSegment(row, col, button) {
            const [start, end] = audioSegments[row][col];
            if (start === 0 && end === 0) return; // Bỏ qua nếu là [0, 0]

            // Vô hiệu hóa tất cả các nút trước khi phát âm thanh
            buttons.forEach(rowButtons => {
                rowButtons.forEach(btn => {
                    if (btn) btn.disabled = true; // Kiểm tra btn tồn tại để tránh lỗi với ô trống
                });
            });

            button.classList.add("playing");
            audio.currentTime = start;
            audio.play();
            const duration = (end - start) * 1000; // Chuyển sang mili giây
            setTimeout(() => {
                audio.pause();
                button.classList.remove("playing");
                // Kích hoạt lại tất cả các nút sau khi âm thanh kết thúc
                buttons.forEach(rowButtons => {
                    rowButtons.forEach(btn => {
                        if (btn) btn.disabled = false; // Kiểm tra btn tồn tại để tránh lỗi với ô trống
                    });
                });
            }, duration);
        }

        // Hàm ghi âm và dừng ghi âm
        recordButton.onclick = () => {
            if (!isRecording) {
                navigator.mediaDevices.getUserMedia({ audio: true })
                    .then(stream => {
                        mediaRecorder = new MediaRecorder(stream);
                        recordedChunks = [];
                        mediaRecorder.ondataavailable = e => recordedChunks.push(e.data);
                        mediaRecorder.onstop = () => {
                            const blob = new Blob(recordedChunks, { type: 'audio/wav' });
                            playbackAudio.src = URL.createObjectURL(blob);
                        };
                        mediaRecorder.start();
                        isRecording = true;
                        recordButton.textContent = "在录";
                        recordButton.className = "button recording";
                    })
                    .catch(err => console.error("Lỗi ghi âm: ", err));
            } else {
                mediaRecorder.stop();
                isRecording = false;
                recordButton.textContent = "录音";
                recordButton.className = "button record-button";
            }
        };

        // Hàm phát lại ghi âm
        playbackButton.onclick = () => {
            if (playbackAudio.src) {
                playbackAudio.play();
            }
        };

        // Hàm lưu ghi âm
        saveButton.onclick = () => {
            if (recordedChunks.length > 0) {
                const blob = new Blob(recordedChunks, { type: 'audio/wav' });
                const url = URL.createObjectURL(blob);
                const a = document.createElement("a");
                a.style.display = "none";
                a.href = url;
                a.download = `recording_${new Date().getTime()}.wav`;
                document.body.appendChild(a);
                a.click();
                document.body.removeChild(a);
            }
        };
    </script>
</p>
<p></p></div>
</div>
</div>
</article>
</section>
</div>
<div id='bottomPagination'>
<nav class="pagination noprt">
<a href="7n_a.html" class="prev"><span><span>&laquo; </span>Previous</span></a> <span class="sep">| </span><a href="9_c.html" class="next"><span>Next<span> &raquo;</span></span></a>
</nav>
</div>
</div>
<p id="made-with-eXe"><a href="https://exelearning.net/" target="_blank" rel="noopener"><span>Made with eXeLearning<span> (New Window)</span></span></a></p><script type="text/javascript" src="_style_js.js"></script></body></html>