<!doctype html>
<html lang="en">
<head>
<link rel="stylesheet" type="text/css" href="base.css" />
<link rel="stylesheet" type="text/css" href="content.css" />
<link rel="stylesheet" type="text/css" href="nav.css" />
<meta http-equiv="content-type" content="text/html;  charset=utf-8" />
<title>5.（易读辅音）声母+基础单元音韵母(韵腹)（B） | 阮玉煌 —— 越南语 - 练习发音资料 [Weixin: XiDeYueNanYu] </title>
<link rel="shortcut icon" href="favicon.ico" type="image/x-icon" />
<meta name="author" content="阮玉煌" />
<meta name="generator" content="eXeLearning 2.9 - exelearning.net" />
<!--[if lt IE 9]><script type="text/javascript" src="exe_html5.js"></script><![endif]-->
<script type="text/javascript" src="exe_jquery.js"></script>
<script type="text/javascript" src="common_i18n.js"></script>
<script type="text/javascript" src="common.js"></script>
<meta name="viewport" content="width=device-width, initial-scale=1" />
    </head>
<body class="exe-web-site" id="exe-node-7"><script type="text/javascript">document.body.className+=" js"</script>
<div id="content">
<p id="skipNav"><a href="#main" class="sr-av">Skip navigation</a></p>
<header id="header" ><div id="headerContent">阮玉煌 —— 越南语 - 练习发音资料 [Weixin: XiDeYueNanYu]</div></header>
<nav id="siteNav">
<ul>
   <li><a href="index.html" class="daddy main-node">Home</a></li>
   <li><a href="1_.html" class="no-ch">1. 越南语发音概况</a></li>
   <li><a href="2_.html" class="no-ch">2. 声调介绍</a></li>
   <li><a href="3_9.html" class="no-ch">3. 越南语9个基础单元音</a></li>
   <li><a href="4a.html" class="no-ch">4.（易读辅音）声母+基础单元音韵母(韵腹)（A）</a></li>
   <li id="active"><a href="5b.html" class="active no-ch">5.（易读辅音）声母+基础单元音韵母(韵腹)（B）</a></li>
   <li><a href="6_c.html" class="no-ch">6. 有关韵母声调练习（C）</a></li>
   <li><a href="7n_a.html" class="no-ch">7.（易读辅音）声母+基础单元音韵腹+韵尾-n （A）</a></li>
   <li><a href="8n_b.html" class="no-ch">8.（易读辅音）声母+基础单元音韵腹+韵尾-n （B）</a></li>
   <li><a href="9_c.html" class="no-ch">9. 有关韵母声调练习（C）</a></li>
   <li><a href="10ng_a.html" class="no-ch">10.（易读辅音）声母+基础单元音韵腹+韵尾-ng （A）</a></li>
   <li><a href="11ng_b.html" class="no-ch">11.（易读辅音）声母+基础单元音韵腹+韵尾-ng （B）</a></li>
   <li><a href="12_c.html" class="no-ch">12. 有关韵母声调练习（C）</a></li>
   <li><a href="13m_a.html" class="no-ch">13.（易读辅音）声母+基础单元音韵腹+韵尾-m （A）</a></li>
   <li><a href="14m_b.html" class="no-ch">14.（易读辅音）声母+基础单元音韵腹+韵尾-m （B）</a></li>
   <li><a href="15_c.html" class="no-ch">15. 有关韵母声调练习（C）</a></li>
</ul>
</nav>
<div id='topPagination'>
<nav class="pagination noprt">
<a href="4a.html" class="prev"><span><span>&laquo; </span>Previous</span></a> <span class="sep">| </span><a href="6_c.html" class="next"><span>Next<span> &raquo;</span></span></a>
</nav>
</div>
<div id="main-wrapper">
<section id="main">
<header id="nodeDecoration"><h1 id="nodeTitle">5.（易读辅音）声母+基础单元音韵母(韵腹)（B）</h1></header>
<article class="iDevice_wrapper textIdevice" id="id19">
<div class="iDevice emphasis0" >
<div id="ta19_127_2" class="block iDevice_content">
<div class="exe-text"><style>
        .matrix-container {
            display: inline-block;
            margin-top: 20px;
        }
        .row {
            display: flex; /* Sử dụng Flexbox để sắp xếp nút trong hàng */
            justify-content: flex-start; /* Căn trái */
            align-items: center; /* Căn giữa theo chiều dọc */
        }
        .button {
            width: 100px;
            height: 40px;
            margin: 2px;
            border: 2px solid #C0C0C0;
            border-radius: 5px;
            box-shadow: 2px 2px 4px #C0C0C0;
            cursor: pointer;
            font-size: 21px;
            font-weight: bold;
            font-family: Arial, sans-serif;
            text-align: center;
        }
        .header-button {
            background-color: #B7D7AA;
            color: #274E13;
        }
        .normal-button {
            background-color: #D9EAD3;
            color: #0C343D;
        }
        .playing {
            border: 2px solid #FF6820; /* Viền cam khi audio đang phát */
        }
        .record-button {
            background-color: #FF6820;
            color: #FFFFFF;
            width: 100px;
            height: 40px;
            font-size: 16px;
            margin: 2px;
        }
        .recording {
            background-color: #009300;
            color: #FFFFFF;
            width: 100px;
            height: 40px;
            font-size: 16px;
            margin: 2px;
        }
        .playback-button {
            background-color: #7D9EC0;
            color: #184008;
            width: 100px;
            height: 40px;
            font-size: 16px;
            margin: 2px;
        }
        .save-button {
            background-color: #CFE2F3;
            color: #184008;
            width: 100px;
            height: 40px;
            font-size: 16px;
            margin: 2px;
        }
        .controls {
            margin-top: 10px;
        }
    </style>
<p><strong><span style="color: #000000; background-color: #ffff00;">注意：这里列出了左侧声母与基础单元音韵母搭配的常见词汇（空格子仅表</span></strong><br /><strong><span style="color: #000000; background-color: #ffff00;">示相对来说不常见搭配，不一定不存在），并以不限声调的形式进行练习。</span></strong><br /><audio src="B3-b.mp3" id="audioPlayer"><a href="B3-b.mp3">audio/mpeg</a></audio><br /><br /><audio style="display: none;" id="playbackAudio"></audio></p>
<div id="matrix" class="matrix-container"></div>
<div class="controls"><button id="recordButton" class="button record-button">录音</button> <button id="playbackButton" class="button playback-button">试听</button> <button id="saveButton" class="button save-button">保存</button></div>
<p>
<script>
        const labels = [
            ["", "i", "ê", "e", "ư", "ơ", "a", "u", "ô", "o"],
            ["p", "pi", "pê", "pe", "pư", "pơ", "pa", "pu", "pô", "pó"],
            ["b", "bị", "bế", "bé", "bự", "bơ", "bà", "bu", "bố", "bò"],
            ["m", "mì", "mế", "mẹ", "", "mơ", "má", "mù", "mổ", "mò"],
            ["n", "nỉ", "nề", "nẻ", "nữ", "nợ", "na", "nụ", "nô", "no"],
            ["th", "thi", "thế", "thẻ", "thư", "thợ", "thà", "thu", "thổ", "thọ"],
            ["t", "tí", "tệ", "té", "tư", "tờ", "ta", "tủ", "tô", "to"],
            ["x", "xì", "xệ", "xe", "xứ", "xơ", "xa", "xu", "xô", "xó"],
            ["s", "sĩ", "sề", "se", "sư", "sợ", "sá", "sụ", "số", "sò"],
            ["l", "lí", "lễ", "lẽ", "lự", "lở", "là", "lũ", "lộ", "lo"],
            ["d(gi, r)", "dì", "dễ", "dẻ", "dữ", "dơ", "da", "dù", "dỗ", "do"],
            ["gi", "gì", "giê", "gie", "giữ", "giơ", "gia", "giũ", "giỗ", "gió"],
            ["r", "rỉ", "rề", "rè", "", "rợ", "ra", "rủ", "rỗ", "rõ"],
            ["c, k", "kĩ", "kể", "kẽ", "cư", "cờ", "ca", "cũ", "cô", "có"],
            ["kh", "khi", "khế", "khe", "khử", "khờ", "khá", "khu", "khô", "khó"],
            ["h", "hi", "hễ", "hè", "hư", "hở", "hả", "hú", "hồ", "ho"]
        ];

        // Khai báo audioSegments dưới dạng mảng 2D (16 hàng x 10 cột) để khớp với labels
/*
        const audioSegments = [
            [[0, 0], [0, 0], [0, 0], [0, 0], [0, 0], [0, 0], [0, 0], [0, 0], [0, 0], [0, 0]],
            [[0, 0], [0, 0], [0, 0], [0, 0], [0, 0], [0, 0], [0, 0], [0, 0], [0, 0], [0, 0]],
            [[0, 0], [0, 0], [0, 0], [0, 0], [0, 0], [0, 0], [0, 0], [0, 0], [0, 0], [0, 0]],
            [[0, 0], [0, 0], [0, 0], [0, 0], [0, 0], [0, 0], [0, 0], [0, 0], [0, 0], [0, 0]],
            [[0, 0], [0, 0], [0, 0], [0, 0], [0, 0], [0, 0], [0, 0], [0, 0], [0, 0], [0, 0]],
            [[0, 0], [0, 0], [0, 0], [0, 0], [0, 0], [0, 0], [0, 0], [0, 0], [0, 0], [0, 0]],
            [[0, 0], [0, 0], [0, 0], [0, 0], [0, 0], [0, 0], [0, 0], [0, 0], [0, 0], [0, 0]],
            [[0, 0], [0, 0], [0, 0], [0, 0], [0, 0], [0, 0], [0, 0], [0, 0], [0, 0], [0, 0]],
            [[0, 0], [0, 0], [0, 0], [0, 0], [0, 0], [0, 0], [0, 0], [0, 0], [0, 0], [0, 0]],
            [[0, 0], [0, 0], [0, 0], [0, 0], [0, 0], [0, 0], [0, 0], [0, 0], [0, 0], [0, 0]],
            [[0, 0], [0, 0], [0, 0], [0, 0], [0, 0], [0, 0], [0, 0], [0, 0], [0, 0], [0, 0]],
            [[0, 0], [0, 0], [0, 0], [0, 0], [0, 0], [0, 0], [0, 0], [0, 0], [0, 0], [0, 0]],
            [[0, 0], [0, 0], [0, 0], [0, 0], [0, 0], [0, 0], [0, 0], [0, 0], [0, 0], [0, 0]], 
            [[0, 0], [0, 0], [0, 0], [0, 0], [0, 0], [0, 0], [0, 0], [0, 0], [0, 0], [0, 0]], 
            [[0, 0], [0, 0], [0, 0], [0, 0], [0, 0], [0, 0], [0, 0], [0, 0], [0, 0], [0, 0]], 
            [[0, 0], [0, 0], [0, 0], [0, 0], [0, 0], [0, 0], [0, 0], [0, 0], [0, 0], [0, 0]]
        ];
*/
const audioSegments = [
    [[0, 0], [1.36679, 2.958125], [3.241246, 4.959496], [5.42811, 7.478296], [7.761417, 9.7335], [10.133774, 12.076569], [12.623285, 14.585606], [14.751573, 17.153219], [17.407052, 19.457237], [20.101581, 22.26892]],
    [[24.47531, 26.564547], [27.179603, 29.317653], [29.561723, 32.012183], [32.174106, 34.478124], [34.575752, 36.977398], [37.43053, 40.007907], [40.164111, 42.468129], [42.800064, 45.221235], [45.7289, 47.779086], [48.130546, 50.512667]],
    [[51.703727, 54.066322], [54.16395, 56.253186], [56.448442, 58.557204], [58.674358, 60.95885], [61.466515, 63.692431], [64.278198, 66.69937], [67.089881, 69.530578], [69.628206, 71.95175], [72.342261, 74.451024], [75.036791, 77.20413]],
    [[79.098111, 81.499757], [81.870743, 84.389542], [84.819105, 87.416007], [87.806518, 90.091011], [0, 0], [90.950136, 93.312731], [93.839921, 96.339195], [96.924962, 99.404711], [100.107631, 102.411649], [102.743584, 105.281909]],
    [[107.214941, 109.636113], [109.772792, 112.233014], [112.662577, 114.986121], [115.239953, 117.778278], [118.305469, 120.394705], [120.746166, 123.147812], [123.304016, 125.725188], [126.232853, 128.185411], [128.575922, 131.094721], [131.426656, 133.633046]],
    [[133.808777, 135.95659], [136.054218, 138.436338], [138.748748, 141.091817], [141.228496, 143.786346], [143.786346, 146.070839], [146.168467, 148.784894], [148.941099, 151.596577], [151.733256, 154.095851], [154.369209, 156.751329], [156.751329, 159.152975]],
    [[159.699691, 162.081812], [162.257542, 164.463932], [164.756816, 167.080359], [167.275615, 169.618684], [169.892042, 172.410842], [172.918507, 175.06632], [175.456832, 177.682747], [178.229463, 180.455379], [181.041146, 183.403741], [183.71615, 185.883489]],
    [[186.000643, 187.894624], [188.148456, 190.64773], [190.64773, 193.16653], [193.34226, 195.880585], [196.041973, 198.126026], [198.126026, 200.469095], [200.469095, 202.987895], [203.163625, 205.760526], [205.838629, 208.318377], [208.396479, 210.720023]],
    [[211.344841, 213.51218], [213.746487, 216.011454], [216.245761, 218.881714], [219.506532, 221.869127], [222.357267, 224.602708], [224.895592, 227.297238], [227.746326, 230.2456], [230.538483, 233.018231], [233.350166, 235.634659], [236.2009, 238.456372]],
    [[238.954007, 241.394704], [241.804741, 244.753103], [245.16314, 247.603837], [247.642888, 250.06406], [250.181213, 252.426655], [252.543808, 255.238338], [255.453119, 257.874291], [258.1867, 260.764076], [261.23269, 263.536708], [263.731963, 266.016456]],
    [[266.48507, 268.789088], [268.984344, 271.346938], [271.56172, 274.11957], [274.334352, 276.657895], [277.399867, 279.508629], [280.02583, 282.308069], [282.78422, 285.329163], [285.509772, 287.594983], [287.857687, 290.090669], [290.468306, 292.849059]],
    [[293.095344, 295.361164], [295.558192, 298.086716], [298.316582, 301.10781], [301.304838, 303.800524], [304.046809, 306.361886], [306.558914, 309.185952], [309.333722, 311.6488], [311.796571, 313.881782], [314.013134, 316.311792], [316.67301, 318.955249]],
    [[320.088159, 322.140533], [323.207767, 325.75271], [326.360212, 328.921574], [329.545496, 332.106858], [0, 0], [332.730779, 334.750315], [335.620521, 337.656476], [338.296816, 340.447704], [341.055206, 343.173255], [343.862853, 345.948064]],
    [[347.261583, 352.867132], [353.435123, 355.766619], [356.160674, 358.50859], [358.902645, 361.234142], [362.022253, 363.959693], [364.452263, 366.685245], [367.621128, 369.886948], [370.461612, 372.793109], [373.400611, 375.485823], [375.912716, 378.014347]],
    [[379.048743, 381.314563], [381.905647, 384.237143], [384.680456, 386.667153], [387.176142, 389.507638], [389.918113, 391.921229], [392.380961, 394.810971], [395.418473, 397.487266], [398.406729, 400.935253], [401.493499, 403.792157], [404.448916, 406.566966]],
    [[407.732714, 410.06421], [410.671713, 412.888276], [413.446521, 415.613828], [416.566129, 418.65134], [419.652899, 421.721691], [422.427708, 424.874137], [425.563734, 427.878811], [428.502733, 430.65362], [431.490989, 433.494105], [434.282216, 436.745065]]
];

        const audio = document.getElementById("audioPlayer");
        const playbackAudio = document.getElementById("playbackAudio");
        const matrix = document.getElementById("matrix");
        const recordButton = document.getElementById("recordButton");
        const playbackButton = document.getElementById("playbackButton");
        const saveButton = document.getElementById("saveButton");
        let mediaRecorder;
        let recordedChunks = [];
        let isRecording = false;
        let buttons = [];

        // Tạo ma trận nút
        for (let i = 0; i < labels.length; i++) {
            const row = document.createElement("div");
            row.className = "row"; // Thêm class row để áp dụng Flexbox
            buttons[i] = [];
            for (let j = 0; j < 10; j++) {
                if (i === 0 && j === 0) {
                    const emptyCell = document.createElement("span");
                    emptyCell.style.display = "inline-block";
                    emptyCell.style.width = "100px";
                    emptyCell.style.height = "40px";
                    emptyCell.style.margin = "2px";
                    row.appendChild(emptyCell);
                    continue;
                }
                const button = document.createElement("button");
                button.className = "button" + (i === 0 || j === 0 ? " header-button" : " normal-button");
                button.textContent = labels[i][j];
                button.dataset.row = i; // Lưu chỉ số hàng
                button.dataset.col = j; // Lưu chỉ số cột
                button.onclick = () => playAudioSegment(i, j, button);
                buttons[i][j] = button;
                row.appendChild(button);
            }
            matrix.appendChild(row);
        }

        // Hàm phát đoạn audio gốc
        function playAudioSegment(row, col, button) {
            const [start, end] = audioSegments[row][col];
            if (start === 0 && end === 0) return; // Bỏ qua nếu là [0, 0]

            // Vô hiệu hóa tất cả các nút trước khi phát âm thanh
            buttons.forEach(rowButtons => {
                rowButtons.forEach(btn => {
                    if (btn) btn.disabled = true; // Kiểm tra btn tồn tại để tránh lỗi với ô trống
                });
            });

            button.classList.add("playing");
            audio.currentTime = start;
            audio.play();
            const duration = (end*1000 - start* 1000); // Chuyển sang mili giây
            setTimeout(() => {
                audio.pause();
                button.classList.remove("playing");
                // Kích hoạt lại tất cả các nút sau khi âm thanh kết thúc
                buttons.forEach(rowButtons => {
                    rowButtons.forEach(btn => {
                        if (btn) btn.disabled = false; // Kiểm tra btn tồn tại để tránh lỗi với ô trống
                    });
                });
            }, duration);
        }

        // Hàm ghi âm và dừng ghi âm
        recordButton.onclick = () => {
            if (!isRecording) {
                navigator.mediaDevices.getUserMedia({ audio: true })
                    .then(stream => {
                        mediaRecorder = new MediaRecorder(stream);
                        recordedChunks = [];
                        mediaRecorder.ondataavailable = e => recordedChunks.push(e.data);
                        mediaRecorder.onstop = () => {
                            const blob = new Blob(recordedChunks, { type: 'audio/wav' });
                            playbackAudio.src = URL.createObjectURL(blob);
                        };
                        mediaRecorder.start();
                        isRecording = true;
                        recordButton.textContent = "在录";
                        recordButton.className = "button recording";
                    })
                    .catch(err => console.error("Lỗi ghi âm: ", err));
            } else {
                mediaRecorder.stop();
                isRecording = false;
                recordButton.textContent = "录音";
                recordButton.className = "button record-button";
            }
        };

        // Hàm phát lại ghi âm
        playbackButton.onclick = () => {
            if (playbackAudio.src) {
                playbackAudio.play();
            }
        };

        // Hàm lưu ghi âm
        saveButton.onclick = () => {
            if (recordedChunks.length > 0) {
                const blob = new Blob(recordedChunks, { type: 'audio/wav' });
                const url = URL.createObjectURL(blob);
                const a = document.createElement("a");
                a.style.display = "none";
                a.href = url;
                a.download = `recording_${new Date().getTime()}.wav`;
                document.body.appendChild(a);
                a.click();
                document.body.removeChild(a);
            }
        };
    </script>
</p>
<p></p></div>
</div>
</div>
</article>
</section>
</div>
<div id='bottomPagination'>
<nav class="pagination noprt">
<a href="4a.html" class="prev"><span><span>&laquo; </span>Previous</span></a> <span class="sep">| </span><a href="6_c.html" class="next"><span>Next<span> &raquo;</span></span></a>
</nav>
</div>
</div>
<p id="made-with-eXe"><a href="https://exelearning.net/" target="_blank" rel="noopener"><span>Made with eXeLearning<span> (New Window)</span></span></a></p><script type="text/javascript" src="_style_js.js"></script></body></html>